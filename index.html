<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">

<meta property="og:title" content="灯光方案对比展示">
<meta property="og:description" content="多状态灯光方案交互对比视图">
<meta property="og:image" content="layer4.png">

<title>Lighting Compare</title>

<style>
html,body{
  margin:0;
  height:100%;
  background:#111;
  overflow:hidden;
  font-family:system-ui;
}

#viewer{
  position:relative;
  width:100%;
  height:100%;
}

.layer{
  position:absolute;
  inset:0;
  background-size:cover;
  background-position:center;
  transition:clip-path .6s ease, opacity .4s ease;
  cursor:pointer;
}

/* 分割线高亮 */
.layer::after{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(
    100deg,
    transparent 49%,
    rgba(255,170,60,.9) 50%,
    transparent 51%
  );
  opacity:0;
  transition:.4s;
  pointer-events:none;
}

.split .layer::after{
  opacity:1;
}

#ui{
  position:fixed;
  top:20px;
  right:20px;
  z-index:10;
}

button{
  padding:10px 16px;
  background:#222;
  color:#fff;
  border:1px solid #444;
  border-radius:6px;
  cursor:pointer;
}

.label{
  position:absolute;
  left:20px;
  color:#fff;
  font-style:italic;
  opacity:.85;
  text-shadow:0 2px 6px #000;
  transition:opacity .4s;
}

.hidden{opacity:0;pointer-events:none;}
</style>
</head>

<body>

<div id="ui">
  <button id="toggle">图层视图</button>
</div>

<div id="viewer">

  <div class="layer" data-id="0" style="background-image:url(layer1.png)"></div>
  <div class="layer" data-id="1" style="background-image:url(layer2.png)"></div>
  <div class="layer" data-id="2" style="background-image:url(layer3.png)"></div>
  <div class="layer" data-id="3" style="background-image:url(layer4.png)"></div>

  <div class="label" style="top:28%">灯光点位</div>
  <div class="label" style="top:40%">白模</div>
  <div class="label" style="top:52%">白模灯光</div>
  <div class="label" style="top:64%">冷色</div>

</div>

<script>
const viewer = document.getElementById("viewer");
const layers = document.querySelectorAll(".layer");
const labels = document.querySelectorAll(".label");
const toggle = document.getElementById("toggle");

let split = true;   // 默认图层视图
let focus = null;

/* 纵向左倾斜切（等距平行） */
const cuts = [
  "polygon(0 0, 40% 0, 15% 100%, 0 100%)",
  "polygon(25% 0, 55% 0, 30% 100%, 0 100%)",
  "polygon(50% 0, 80% 0, 55% 100%, 25% 100%)",
  "polygon(75% 0, 100% 0, 100% 100%, 50% 100%)"
];

function showMain(){
  layers.forEach((l,i)=>{
    l.style.clipPath = i===3 ? "none" : "polygon(0 0,0 0,0 0,0 0)";
  });
  labels.forEach(l=>l.classList.add("hidden"));
  viewer.classList.remove("split");
  split = false;
  focus = null;
}

function showSplit(){
  layers.forEach((l,i)=>{
    l.style.clipPath = cuts[i];
  });
  labels.forEach(l=>l.classList.remove("hidden"));
  viewer.classList.add("split");
  split = true;
}

toggle.onclick = ()=>{
  split ? showMain() : showSplit();
};

layers.forEach((layer,i)=>{
  layer.onclick = ()=>{
    if(!split) return;

    if(focus === i){
      showSplit();
      focus = null;
      return;
    }

    layers.forEach((l,idx)=>{
      l.style.clipPath = idx===i ? "none" : "polygon(0 0,0 0,0 0,0 0)";
    });

    labels.forEach(l=>l.classList.add("hidden"));
    focus = i;
  };
});

/* 默认进入即为图层视图 */
showSplit();
</script>

</body>
</html>
